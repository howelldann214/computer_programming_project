<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>結帳</title>
    <link rel="stylesheet" href="checkout.css">
    <script src="transport.js" defer></script>
    <!-- 登入檢查 -->
    <script src="../js/auth.js" defer></script>
    <script src="../js/common.js" defer></script>
    <script>
        // 檢查是否已登入，未登入則跳轉到登入頁面
        document.addEventListener('DOMContentLoaded', function () {
            if (!checkLogin()) {
                redirectToLogin();
            }
        });
    </script>
</head>
<body>
    <header>
        <div class="top-bar">
            <div class="logo">
                <a href=""><img src="../material/icon-1.png" href="../main/main.html" alt="logo"></a>
            </div>
            <div class="top-right">
                <ul>
                    <li><a href="../login/login.html">登入</a></li>
                    <li><a href="../signup/signup.html">註冊</a></li>
                </ul>
            </div>
        </div>
    </header>
    <main>
        <div class="checkout">
            <table class="order">
                <thead>
                    <tr>
                        <th><h2>訂單商品</h2></th>
                        <th>單價</th>
                        <th>數量</th>
                        <th>總價</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="item-details">
                            <img src="https://img.pchome.com.tw/cs/items/DMBL53A900HVOMD/000001_1727236783.jpg" alt="商品圖片">
                            <div>
                                <p class="item-title">商品名稱 1</p>
                            </div>
                        </td>
                        <td>$100</td>
                        <td>2</td>
                        <td>$200</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr class="total-row">
                        <td colspan="3" class="total-label">訂單金額 (3 商品):</td>
                        <td class="total-price">$250</td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div class="transport">
            <h2>運送方式</h2>
            <div class="transport-method">
                <button type="button" class="method-btn" data-value="home">宅配</button>
                <button type="button" class="method-btn" data-value="store">超商取貨</button>
                <input type="hidden" name="transport" id="transport-input">
            </div>
             <!-- 地址输入框，默认隐藏 -->
            <div class="address-input" id="address-container" style="display: none;">
                <label for="address">地址:</label>
                <input type="text" id="address" name="address">
            </div>
            <!-- 超商取貨选择，默认隐藏 -->
            <div class="store-input" id="store-container" style="display: none;">
                <label for="store-select">便利商店:</label>
                <select id="store-select">
                    <option value="7-11">7-11</option>
                    <option value="family">全家</option>
                    <option value="ok">OK</option>
                    <option value="hi-life">萊爾富</option>
                </select>
                <label for="branch">分店:</label>
                <input type="text" id="branch" name="branch">
            </div>
        </div>
        <div class="payment">
            <h2>付款方式</h2>
            <div class="payment-method">
                <button type="button" class="method-btn" data-value="credit-card">信用卡</button>
                <button type="button" class="method-btn" data-value="cash">貨到付款</button>
                <input type="hidden" name="payment" id="payment-input">
            </div>
        </div>
        <div class="pay">
            <button class="pay-btn">付款</button>
        </div>
    </main>
    <script src="transport_payment.js" ></script>
</body>